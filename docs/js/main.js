!function(t){function e(h){if(i[h])return i[h].exports;var s=i[h]={i:h,l:!1,exports:{}};return t[h].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,h){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:h})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=28)}([function(t,e,i){"use strict";function h(){a.widthPx=a.width*r.pixelSize,a.heightPx=a.height*r.pixelSize,b.widthPx=b.width*r.pixelSize,b.heightPx=b.height*r.pixelSize,b.glowLengthPx=b.glowLength*r.pixelSize,b.widthPadded=b.width+2*b.glowLength,b.heightPadded=b.height+2*b.glowLength,b.widthPaddedPx=b.widthPx+2*b.glowLengthPx,b.heightPaddedPx=b.heightPx+2*b.glowLengthPx,c.shipPaddingPx=c.shipPadding*r.pixelSize,c.linePaddingPx=c.linePadding*r.pixelSize}function s(t,e){switch(t){case n.g.beveled:a.drawStyle=n.g.beveled;break;case"pixelSize":r.pixelSize=parseInt(e,10),h();break;case"font":f.font=e,p.font=e,x.font=e;break;case n.g.fps:y.showFPS=e||void 0===e;break;case n.g.sound:m.on=e||void 0===e}}var n=i(1);e.a=s;const r={pixelSize:3,screenWidth:480,screenHeight:600};e.b=r;const o={pixelSize:2,background:"#000011",maxStars:80,maxIntensity:80,hue:["#9BB0FF","#AABFFF","#CAD7FF","#F8F7FF","#FEF4EA"],beamFadeRate:15,minBeamIntensity:.1,initialBeamIntensity:.6,maxBeamLength:5};e.p=o;const a={width:7,height:5,minBits:7,maxBits:15,defaultColor:"#FFC905",drawStyle:n.g.regular};e.e=a;const y={preventSubPixelDrawing:!1,stickToPixelGrid:!1,showFPS:!1,systemInfoColor:"lime",systemInfoText:"10px sans-serif",maxFPS:60,paletteSize:100,mask:[[["#000000",0],["#ffffff",25],["#ffffff",50]],[["#000000",25],["#000000",0],["#ffffff",25]],[["#000000",50],["#000000",25],["#000000",0]]]};e.h=y;const c={shipPadding:9,linePadding:3};e.k=c;const d={defaultColor:"#9305ff",startingLives:3,maxLives:4,get speed(){return.3*r.screenWidth},get minTravelDistance(){return a.widthPx},respawnDelay:1e3};e.c=d;const l={itemsPerCanvas:10};e.g=l;const b={defaultColor:"#ffffff",glow:.2,glowDegradation:0,width:3,height:5,minBits:3,maxBits:4,armSteps:4,glowLength:1};e.i=b;const u={duration:300,minOpacity:20,spread:4};e.l=u;const g={defaultColor:"#ffffff",alignment:"left"};e.f=g;const f={font:"pressStart",fontSize:2,get paddingX(){return Math.round(.02*r.screenWidth)},get paddingY(){return Math.round(.02*r.screenHeight)},scoreDigits:4};e.d=f;const p={font:"pressStart",titleSize:3,menuItemSize:2,lineHeight:2,get cursorPadding(){return 2*r.pixelSize},get cursorSpeed(){return.3*r.screenHeight},color:"#ffffff",fadeSteps:8,transitionDuration:2500,scoreDigits:4};e.n=p;const w={key:"highScores",amount:5,predefinedScores:[1e3,500,250,100,10]};e.m=w;const x={size:20,font:"pressStart",color:"#ffffff",opacity:[75,100,75,50,25,0],duration:1e3};e.j=x;const m={on:!1};e.o=m,h()},function(t,e,i){"use strict";var h=i(16),s=i(18),n=i(17),r=i(19);const o={oneTypePerLine:"one-type-per-line"};e.h=o;const a={left:"left",right:"right",up:"up",down:"down"};e.c=a;const y={keyDown:"keydown",keyUp:"keyup",levelEntityCreated:"levelEntityCreated",levelEntityDestroyed:"levelEntityDestroyed",missile:"missiles",effect:"effects",formation:"formations",enemyDestroyed:"enemyDestroyed",shipListUpdate:"shipListUpdate",scoreUpdate:"scoreUpdate",gameOver:"gameOver",cursorRepositioned:"cursorRepositioned",menuToGameTransition:"menuToGameTransition",animationFrame:"menuToGameTransitionFrame",introOver:"introOver"};e.a=y;const c={arrowLeft:"ArrowLeft",arrowRight:"ArrowRight",arrowUp:"ArrowUp",arrowDown:"ArrowDown",enter:"Enter",space:" "};e.b=c;const d={arming:"arming",armed:"armed",launched:"launched",destroyed:"destroyed"};e.d=d;const l={regular:"regular",beveled:"beveled",sound:"sound",fps:"fps"};e.g=l;const b={left:"left",right:"right",center:"center"};e.e=b;const u={pressStart:s.a,c64:h.a,gohufont:n.a,powerline:r.a};e.f=u},function(t,e,i){"use strict";function h(t,e=t){return t=1===arguments.length?1:t,t+Math.floor(Math.random()*(e-t+1))}function s(t,e){const i=[];for(let s=0;s<e;s+=1)i.push(h(t));return Math.max(...i)}function n(t){let e,i,s,n=t.slice(0);for(e=n.length-1;e>0;e--)i=h(0,e),s=n[e],n[e]=n[i],n[i]=s;return n}var r=i(10);i.d(e,"c",function(){return r.a}),i.d(e,"d",function(){return r.b}),i.d(e,"e",function(){return r.c}),i.d(e,"k",function(){return r.d});var o=i(9);i.d(e,"g",function(){return o.a});var a=i(25);i.d(e,"i",function(){return a.a});var y=i(24);i.d(e,"b",function(){return y});var c=i(26);i.d(e,"a",function(){return c});var d=i(27);i.d(e,"f",function(){return d.a}),e.h=h,e.l=s,e.j=n},function(t,e,i){"use strict";function h(){let t=[];const e=i.i(o.h)(r.e.minBits,r.e.maxBits),h=[];for(let s=0;s<y*r.e.height;s+=1)t.push(s<e);t=i.i(o.j)(t);for(let s=0;s<r.e.height;s+=1)for(let n=0;n<y;n+=1)h[s*r.e.width+n]=t[s*y+n],h[s*r.e.width+r.e.width-n-1]=t[s*y+n];return h}function s(t,e,i,h,s){const n=r.e.drawStyle===a.g.beveled?o.k:o.e;for(let y=0;y<r.e.height;y+=1)for(let c=0;c<r.e.width;c+=1)h[y*r.e.width+c]&&n(t,e+c*r.b.pixelSize,i+y*r.b.pixelSize,s)}function n(t={}){const e=Object.create(d);return e.color=t.color||e.color,e.blueprint=h(),c.clearRect(0,0,r.e.widthPx,r.e.heightPx),s(c,0,0,e.blueprint,e.color),e.sprite=i.i(o.f)(c),e}var r=i(0),o=i(2),a=i(1);e.b=h,e.c=s,e.a=n;const y=Math.ceil(r.e.width/2),c=i.i(o.c)(r.e.widthPx,r.e.heightPx),d={player:!1,blueprint:null,color:r.e.defaultColor,missileType:null,missile:null,formation:null,sprite:null,scoreValue:1,x:null,y:null,show:function(t,e=this.x,h=this.y){i.i(o.d)(t,this.sprite.ctx,[e,h],this.sprite.coords,[r.e.widthPx,r.e.heightPx])},behavior:function(){this.player&&this.missileType&&(!this.missile||this.missile.checkSafeDistance())&&this.armMissile()},armMissile:function(){this.missile&&!this.missile.checkSafeDistance()||(this.missile=Object.create(this.missileType),this.missile.launcher=this,this.missile.arm(),o.a.pub(a.a.levelEntityCreated,a.a.missile,this.missile))},fire:function(){this.missile&&this.missile.launch()},getCenter(){return[this.x+(this.formation?this.formation.x:0)+r.e.widthPx/2,this.y+(this.formation?this.formation.y:0)+r.e.heightPx/2]}}},function(t,e,i){"use strict";function h(t){if(o[t])return o[t];{const e=Object.create(y);return e.meta=n.f[t].meta,e.glyphs=Object.assign({},n.f[t].glyphs),Object.keys(e.glyphs).forEach(t=>{e.glyphs[t].width||e.meta.boundingBox.width;e.glyphs[t].sprites={},e.glyphs[t].bitmap=[];for(let i=0;i<e.glyphs[t].bytes.length;i+=1){e.glyphs[t].bitmap[i]=[];for(let h=0;h<8;h+=1)e.glyphs[t].bitmap[i][7-h]=(e.glyphs[t].bytes[i]>>h)%2}e.glyphs[t].width="width"in e.glyphs[t]?e.glyphs[t].width:e.meta.boundingBox.width,e.glyphs[t].height="height"in e.glyphs[t]?e.glyphs[t].height:e.meta.boundingBox.height,e.glyphs[t].x="x"in e.glyphs[t]?e.glyphs[t].x:e.meta.boundingBox.x,e.glyphs[t].y="y"in e.glyphs[t]?e.glyphs[t].y:e.meta.boundingBox.y,e.glyphs[t].dWidth="dWidth"in e.glyphs[t]?e.glyphs[t].dWidth:e.meta.boundingBox.width}),o[t]=e,e}}var s=i(0),n=i(1),r=i(2);e.a=h;const o=[],a=i.i(r.c)(s.b.pixelSize,s.b.pixelSize),y={meta:null,glyphs:null,write:function(t,e,i,h={}){let r=h.color||s.f.defaultColor,o=h.size||s.b.pixelSize,a=h.alignment||s.f.alignment,[y,c]=e.map(t=>Math.round(t)),d=y;switch(a){case n.e.center:let t=0;for(let e=0;e<i.length;e+=1)t+=this.glyphs[i[e]].dWidth*o;y-=Math.floor(t/2),d=y;break;case n.e.right:for(let e=0;e<i.length;e+=1)y-=this.glyphs[i[e]].dWidth*o;d=y}for(let l=0;l<i.length;l+=1)this.writeLetter(t,i[l],y,c,r,o),y+=this.glyphs[i[l]].dWidth*o;return{lineStart:d,lineEnd:y}},writeLetter(t,e,h,s,n,o){const a=n+"-"+o;this.glyphs[e].sprites[a]||this.drawLetter(this.glyphs[e],n,o),i.i(r.d)(t,this.glyphs[e].sprites[a].ctx,[h+this.glyphs[e].x*o,s-(this.glyphs[e].y+this.glyphs[e].height)*o],this.glyphs[e].sprites[a].coords,[this.meta.boundingBox.width*o,this.meta.boundingBox.height*o])},drawLetter(t,e,h){a.canvas.width!==this.meta.boundingBox.width*h&&(a.canvas.width=this.meta.boundingBox.width*h),a.canvas.height!==this.meta.boundingBox.height*h&&(a.canvas.height=this.meta.boundingBox.height*h),a.clearRect(0,0,this.meta.boundingBox.width*h,this.meta.boundingBox.height*h);for(let s=0;s<t.height;s+=1)for(let n=0;n<t.width;n+=1)t.bitmap[s]&&t.bitmap[s][n]&&i.i(r.e)(a,n*h,s*h,e,h);t.sprites[e+"-"+h]=i.i(r.f)(a)}}},function(t,e,i){"use strict";function h(){const t=[];for(let e=0;e<o.m.predefinedScores.length;e+=1)t.push({color:o.e.defaultColor,blueprint:a.b(),score:o.m.predefinedScores[e]});localStorage.setItem(o.m.key,JSON.stringify(t))}function s(){null===localStorage.getItem(o.m.key)&&h()}function n(t){const e=JSON.parse(localStorage.getItem(o.m.key));return e.push(t),e.sort((t,e)=>e.score-t.score),e.splice(o.m.amount),localStorage.setItem(o.m.key,JSON.stringify(e)),e.indexOf(t)}function r(){return JSON.parse(localStorage.getItem(o.m.key))}var o=i(0),a=i(3);e.a=s,e.b=n,e.c=r},function(t,e,i){"use strict";function h(t,e){const i=Object.create(o);i.color=t.color,[i.x,i.y]=e?e.getCenter():t.getCenter(),i.particles=[];for(let h=0;h<n.e.height;h+=1)for(let s=0;s<n.e.width;s+=1)t.blueprint[h*n.e.width+s]&&i.particles.push({x:t.x+(t.formation?t.formation.x:0)+(s+.5)*n.b.pixelSize-i.x,y:t.y+(t.formation?t.formation.y:0)+(h+.5)*n.b.pixelSize-i.y});return i}var s=i(1),n=i(0),r=i(2);e.a=h;const o={particles:null,color:null,opacity:100,elapsedTime:0,spread:1,x:null,y:null,move:function(t){this.elapsedTime+=t,this.spread=1+(n.l.spread-1)*this.elapsedTime/n.l.duration,this.alpha=100-(100-n.l.minOpacity)*this.elapsedTime/n.l.duration,this.elapsedTime>n.l.duration&&r.a.pub(s.a.levelEntityDestroyed,s.a.effect,this)},show:function(t){this.particles.forEach(e=>{(n.e.drawStyle===s.g.beveled?r.k:r.e)(t,e.x*this.spread-n.b.pixelSize/2+this.x,e.y*this.spread-n.b.pixelSize/2+this.y,i.i(r.g)(this.color,this.alpha))})}}},function(t,e,i){"use strict";function h(t,e){return(e+n.i.glowLength)*n.i.widthPadded+t+n.i.glowLength}function s(t={}){const e=Object.create(d),s=i.i(o.h)(n.i.minBits,n.i.maxBits);e.color=t.color||e.color;let r=[];for(let l=0;l<y*c;l+=1)r.push(l<s);r=i.i(o.j)(r),e.blueprint=[],e.sprites=[];for(let l=0;l<c;l+=1)for(let b=0;b<y;b+=1)r[l*y+b]&&(e.blueprint[h(b,l)]=100,e.blueprint[h(n.i.width-1-b,l)]=100,e.blueprint[h(b,n.i.height-1-l)]=100,e.blueprint[h(n.i.width-1-b,n.i.height-1-l)]=100);for(let l=0;l<n.i.widthPadded*n.i.heightPadded;l+=1)if(100===e.blueprint[l])for(let b=1;b<=n.i.glowLength;b+=1){let t=100*(n.i.glow-n.i.glow*n.i.glowDegradation*(b-1));e.blueprint[l-b]=e.blueprint[l-b]||t,e.blueprint[l+b]=e.blueprint[l+b]||t,e.blueprint[l-n.i.widthPadded*b]=e.blueprint[l-n.i.widthPadded*b]||t,e.blueprint[l+n.i.widthPadded*b]=e.blueprint[l+n.i.widthPadded*b]||t}for(let b=0;b<n.i.armSteps;b+=1){a.clearRect(0,0,n.i.widthPaddedPx,n.i.heightPaddedPx);for(let t=0;t<n.i.widthPadded*n.i.heightPadded;t+=1)e.blueprint[t]&&i.i(o.e)(a,t%n.i.widthPadded*n.b.pixelSize,Math.floor(t/n.i.widthPadded)*n.b.pixelSize,i.i(o.g)(e.color,e.blueprint[t]*(b+1)/n.i.armSteps));e.sprites.push(i.i(o.f)(a))}return e}var n=i(0),r=i(1),o=i(2);e.a=s;const a=i.i(o.c)(n.i.widthPaddedPx,n.i.heightPaddedPx),y=Math.ceil(n.i.width/2),c=Math.ceil(n.i.height/2),d={speed:.2,color:n.i.defaultColor,launcher:null,sprites:null,armStart:null,armProgress:0,armSpeed:1e3,scoreValue:1,status:null,x:null,y:null,show:function(t,e=this.x,h=this.y){i.i(o.d)(t,this.sprites[this.armProgress].ctx,[e-n.i.glowLengthPx,h-n.i.glowLengthPx],this.sprites[this.armProgress].coords,[n.i.widthPaddedPx,n.i.heightPaddedPx])},alignWithShipX(){this.x=this.launcher.x+(n.e.widthPx-n.i.widthPx)/2,this.x+=this.launcher.formation?this.launcher.formation.x:0},alignWithShipY(){this.launcher.player?this.y=this.launcher.y+(n.e.heightPx-n.i.heightPx)/2:this.y=this.launcher.formation.y+this.launcher.y-(n.e.heightPx-n.i.heightPx)/2},arm:function(){this.alignWithShipX(),this.alignWithShipY(),this.armStart=Date.now(),this.status=r.d.arming},launch(){this.status===r.d.armed&&(this.status=r.d.launched)},behavior:function(){this.status===r.d.arming&&(this.armProgress=Math.min(Math.floor((Date.now()-this.armStart)/(this.armSpeed/n.i.armSteps)),n.i.armSteps-1),this.armProgress===n.i.armSteps-1&&(this.status=r.d.armed,this.launcher.barrage&&this.launch()))},move:function(t){this.status!==r.d.launched&&this.alignWithShipY(),this.status===r.d.launched&&this.checkSafeDistance()||this.alignWithShipX(),this.status===r.d.launched&&(this.y+=this.speed*n.b.screenHeight*t/1e3*(this.launcher.player?-1:1)),(this.y<-n.i.heightPaddedPx||this.y>n.b.screenHeight)&&this.destroy()},checkSafeDistance:function(){return this.status===r.d.launched&&Math.abs(this.launcher.y+(this.launcher.formation?this.launcher.formation.y:0)-this.y)>n.i.heightPaddedPx},destroy:function(){this.status=r.d.destroyed,o.a.pub(r.a.levelEntityDestroyed,r.a.missile,this),this.launcher.missile===this&&(this.launcher.missile=null)},getCenter:function(){return[this.x+n.i.widthPx/2,this.y+n.i.heightPx/2]}}},function(t,e,i){"use strict";e.a={ships:"Ships:",score:"Score:",title:"Invaders",play:"Play game",highScores:"High scores",options:"Options",back:"Back",sound:"Sound: ",showFPS:"Show FPS: ",on:"On",off:"Off"}},function(t,e,i){"use strict";function h(t,e){return`rgba(${parseInt(t.substr(1,2),16)}, ${parseInt(t.substr(3,2),16)}, ${parseInt(t.substr(5,2),16)}, ${e/100})`}e.a=h},function(t,e,i){"use strict";function h(t=o.b.screenWidth,e=o.b.screenHeight){const i=document.createElement("canvas");return i.width=t,i.height=e,i.getContext("2d")}function s(t,e,i,h,s=o.b.pixelSize){t.fillStyle=h,t.fillRect(e,i,s,s)}function n(t,e,i,h,s){o.h.preventSubPixelDrawing&&(i=i.map(t=>Math.floor(t))),o.h.stickToPixelGrid&&(i=i.map(t=>t-t%o.b.pixelSize)),h&&s?t.drawImage(e.canvas,...h,...s,...i,...s):t.drawImage(e.canvas,...i)}function r(t,e,i,h){c[h]||(d+=1,c[h]=d,y.fillStyle=h,y.fillRect(d*o.b.pixelSize,0,o.b.pixelSize,o.b.pixelSize),n(y,y,[o.b.pixelSize*d,0],[0,0],[o.b.pixelSize,o.b.pixelSize])),n(t,y,[e,i],[c[h]*o.b.pixelSize,0],[o.b.pixelSize,o.b.pixelSize])}var o=i(0),a=i(9);e.a=h,e.c=s,e.b=n,e.d=r;const y=h(o.b.pixelSize*o.h.paletteSize,o.b.pixelSize),c={transparent:0};let d=0;o.h.mask.forEach((t,e)=>t.forEach((t,h)=>{y.fillStyle=i.i(a.a)(...t),y.fillRect(h,e,1,1)}))},function(t,e,i){"use strict";function h(t){switch(t){case u.b.arrowLeft:x.moving||(x.plannedTravel=b.c.minTravelDistance),x.moving=!0,P=!0,x.direction=u.c.left;break;case u.b.arrowRight:x.moving||(x.plannedTravel=b.c.minTravelDistance),x.moving=!0,v=!0,x.direction=u.c.right;break;case u.b.space:x.setBarrage(!0),x.fire()}}function s(t){switch(t){case u.b.arrowLeft:P=!1,x.direction===u.c.left&&(x.moving=!1);break;case u.b.arrowRight:v=!1,x.moving=P||v;break;case u.b.space:x.setBarrage(!1)}}function n(t,e){m[t].push(e)}function r(t,e){m[t].splice(m[t].indexOf(e),1)}function o(t){x.score+=t.scoreValue,g.a.pub(u.a.scoreUpdate,x.score)}function a(){S=!0}function y(){z=!1,p.a()}function c(t,e){P=!1,v=!1,S=!1,g.a.on(u.a.keyDown,h),g.a.on(u.a.keyUp,s),g.a.on(u.a.levelEntityCreated,n),g.a.on(u.a.levelEntityDestroyed,r),g.a.on(u.a.enemyDestroyed,o),g.a.on(u.a.gameOver,a),g.a.on(u.a.introOver,y),x=t.player,m=t.level,x.currentShip.armMissile(),w=e,f.a(x),p.b(m.number),z=!0}function d(){[h,s,n,r,o,a,y].forEach(t=>g.a.off(t)),f.b(),p.a(),m.missiles.forEach(t=>t.destroy())}function l(t){return z?g.a.pub(u.a.animationFrame,t):(m.missiles.filter(t=>t.status===u.d.launched).forEach(t=>{t.launcher.player?m.formations.forEach(e=>e.checkCollisions(t)):x.checkCollisions(t)}),m.formations.forEach(e=>{e.behavior(),e.ships.forEach(t=>t.behavior()),e.move(t)}),x.behavior(),x.move(t),m.missiles.forEach(e=>{e.behavior(),e.move(t)}),m.effects.forEach(e=>e.move(t)),m.missiles.forEach(t=>t.show(w)),m.formations.forEach(t=>t.show(w)),m.effects.forEach(t=>t.show(w))),x.show(w),!S&&(m.formations.length||m.events.length)||m.effects.length?null:{player:x,level:m,gameOver:S}}Object.defineProperty(e,"__esModule",{value:!0});var b=i(0),u=i(1),g=i(2),f=i(21),p=i(22);e.init=c,e.end=d,e.drawFrame=l;let w,x,m,S,P,v,z},function(t,e,i){"use strict";function h(t,e){const i=l.a(t);u=t.player,b=e,g={x:i.x,y:i.y-d.e.heightPx},f=g.y,y.a.on(c.a.cursorRepositioned,r),y.a.on(c.a.menuToGameTransition,o),p=!1}function s(){y.a.off(r),y.a.off(o),l.b()}function n(t){if(a(t))return{player:u};p&&y.a.pub(c.a.animationFrame,t),u.show(b,g.x,g.y)}function r(t){f=t-d.e.heightPx}function o(){p=!0}function a(t){if(p)if(g.y!==u.y)g.y=Math.min(g.y+d.c.speed*t/1e3,u.y);else{if(g.x===u.x)return!0;g.x=Math.min(g.x+d.c.speed*t/1e3,u.x)}else g.y!==f&&(g.y<f?g.y=Math.min(g.y+d.n.cursorSpeed*t/1e3,f):g.y=Math.max(g.y-d.n.cursorSpeed*t/1e3,f))}Object.defineProperty(e,"__esModule",{value:!0});var y=i(2),c=i(1),d=i(0),l=i(23);e.init=h,e.end=s,e.drawFrame=n;let b,u,g,f,p},function(t,e,i){"use strict";function h(t){const e={number:t,formations:[],missiles:[],events:[],effects:[]};return e.formations.push(n.a({levelNumber:t,width:Math.floor(s.b.screenWidth/(s.e.widthPx+s.k.shipPaddingPx)*.7),height:6,shipTypes:6,shipArrangement:r.h.oneTypePerLine})),e}var s=i(0),n=i(20),r=i(1);e.a=h},function(t,e,i){"use strict";function h(){const t=Object.create(c);t.extraShips=[];for(let e=0;e<s.c.startingLives;e+=1){const e=r.a(d);e.player=!0,e.x=Math.floor(s.b.screenWidth/2-s.e.widthPx/2),e.y=Math.floor(s.b.screenHeight-1.5*s.e.heightPx),e.missileType=o.a(),e.missileType.launcher=e,t.extraShips.push(e)}return t.currentShip=t.extraShips.pop(),t}var s=i(0),n=i(1),r=i(3),o=i(7),a=i(6),y=i(2);e.a=h;const c={score:0,currentShip:null,extraShips:null,direction:null,plannedTravel:0,moving:!1,speed:s.c.speed,get x(){return this.currentShip&&this.currentShip.x},get y(){return this.currentShip&&this.currentShip.y},show:function(t,e,i){this.currentShip&&this.currentShip.show(t,e,i)},behavior:function(){this.currentShip&&this.currentShip.behavior()},move:function(t){if(this.currentShip)if(this.moving||this.plannedTravel>0){let e=this.speed*t/1e3;switch(this.direction){case n.c.left:this.currentShip.x-=e;break;case n.c.right:this.currentShip.x+=e}this.currentShip.x<0&&(this.currentShip.x=0),this.currentShip.x>s.b.screenWidth-s.e.widthPx&&(this.currentShip.x=s.b.screenWidth-s.e.widthPx),this.plannedTravel-=e}else this.currentShip.x=Math.round(this.currentShip.x)},fire(){this.currentShip&&this.currentShip.fire()},setBarrage(t){this.currentShip&&(this.currentShip.barrage=t)},checkCollisions(t){this.currentShip&&i.i(y.i)(t.x,t.y,this.currentShip.x,this.currentShip.y)&&(t.destroy(),this.currentShip.missile&&this.currentShip.missile.status!==n.d.launched?(y.a.pub(n.a.levelEntityCreated,n.a.effect,a.a(this.currentShip)),y.a.pub(n.a.levelEntityCreated,n.a.effect,a.a(this.currentShip.missile)),this.currentShip.missile.destroy()):y.a.pub(n.a.levelEntityCreated,n.a.effect,a.a(this.currentShip,t)),this.extraShips.length?(this.currentShip=null,setTimeout(()=>{this.currentShip=this.extraShips.pop(),y.a.pub(n.a.shipListUpdate,this.extraShips)},s.c.respawnDelay),y.a.pub(n.a.shipListUpdate,this.extraShips)):(this.lastShip=this.currentShip,y.a.pub(n.a.gameOver),this.currentShip=null))}},d={color:s.c.defaultColor}},function(t,e,i){"use strict";function h(){const t=s.p.pixelSize||s.b.pixelSize,e=Object.create(r);e.ctx.canvas.width=s.b.screenWidth,e.ctx.canvas.height=s.b.screenHeight,e.stars=[];const h=i.i(n.l)(s.p.maxStars,2);for(let o=0;o<h;o+=1){const h={x:i.i(n.h)(s.p.maxBeamLength,s.b.screenWidth/t-2*s.p.maxBeamLength-1),y:i.i(n.h)(s.p.maxBeamLength,s.b.screenHeight/t-2*s.p.maxBeamLength-1),intensity:i.i(n.h)(s.p.maxIntensity),hue:s.p.hue[i.i(n.h)(0,s.p.hue.length-1)]};e.stars.push(h)}return e.draw(),e}var s=i(0),n=i(2);e.a=h;const r={ctx:i.i(n.c)(),draw:function(){const t=s.p.pixelSize||s.b.pixelSize;this.ctx.fillStyle=s.p.background,this.ctx.fillRect(0,0,s.b.screenWidth,s.b.screenHeight),this.stars.forEach(e=>{i.i(n.e)(this.ctx,e.x*t,e.y*t,i.i(n.g)(e.hue,e.intensity),t);let h=0,r=e.intensity*s.p.initialBeamIntensity;for(;r>s.p.minBeamIntensity&&h<=s.p.maxBeamLength;)i.i(n.e)(this.ctx,(e.x-h)*t,e.y*t,i.i(n.g)(e.hue,r),t),i.i(n.e)(this.ctx,(e.x+h)*t,e.y*t,i.i(n.g)(e.hue,r),t),i.i(n.e)(this.ctx,e.x*t,(e.y-h)*t,i.i(n.g)(e.hue,r),t),i.i(n.e)(this.ctx,e.x*t,(e.y+h)*t,i.i(n.g)(e.hue,r),t),h+=1,r=e.intensity*s.p.initialBeamIntensity-h*s.p.beamFadeRate})},show:function(t){i.i(n.d)(t,this.ctx,[0,0])}}},function(t,e,i){"use strict";const h={meta:{name:"c64",points:8,properties:{fontDescent:2,fontAscent:6,defaultChar:0},boundingBox:{width:8,height:8,x:0,y:-2}},glyphs:{0:{bytes:[60,102,110,118,102,102,60,0]},1:{bytes:[24,24,56,24,24,24,126,0]},2:{bytes:[60,102,6,12,48,96,126,0]},3:{bytes:[60,102,6,28,6,102,60,0]},4:{bytes:[6,14,30,102,127,6,6,0]},5:{bytes:[126,96,124,6,6,102,60,0]},6:{bytes:[60,102,96,124,102,102,60,0]},7:{bytes:[126,102,12,24,24,24,24,0]},8:{bytes:[60,102,102,60,102,102,60,0]},9:{bytes:[60,102,102,62,6,102,60,0]}," ":{bytes:[0,0,0,0,0,0,0,0]},"!":{bytes:[24,24,24,24,0,0,24,0]},'"':{bytes:[102,102,102,0,0,0,0,0]},"#":{bytes:[102,102,255,102,255,102,102,0]},$:{bytes:[24,62,96,60,6,124,24,0]},"%":{bytes:[98,102,12,24,48,102,70,0]},"&":{bytes:[60,102,60,56,103,102,63,0]},"'":{bytes:[6,12,24,0,0,0,0,0]},"(":{bytes:[12,24,48,48,48,24,12,0]},")":{bytes:[48,24,12,12,12,24,48,0]},"*":{bytes:[0,102,60,255,60,102,0,0]},"+":{bytes:[0,24,24,126,24,24,0,0]},",":{bytes:[0,0,0,0,0,24,24,48]},"-":{bytes:[0,0,0,126,0,0,0,0]},".":{bytes:[0,0,0,0,0,24,24,0]},"/":{bytes:[0,3,6,12,24,48,96,0]},":":{bytes:[0,0,24,0,0,24,0,0]},";":{bytes:[0,0,24,0,0,24,24,48]},"<":{bytes:[14,24,48,96,48,24,14,0]},"=":{bytes:[0,0,126,0,126,0,0,0]},">":{bytes:[112,24,12,6,12,24,112,0]},"?":{bytes:[60,102,6,12,24,0,24,0]},"@":{bytes:[60,102,110,110,96,98,60,0]},A:{bytes:[24,60,102,126,102,102,102,0]},B:{bytes:[124,102,102,124,102,102,124,0]},C:{bytes:[60,102,96,96,96,102,60,0]},D:{bytes:[120,108,102,102,102,108,120,0]},E:{bytes:[126,96,96,120,96,96,126,0]},F:{bytes:[126,96,96,120,96,96,96,0]},G:{bytes:[60,102,96,110,102,102,60,0]},H:{bytes:[102,102,102,126,102,102,102,0]},I:{bytes:[60,24,24,24,24,24,60,0]},J:{bytes:[30,12,12,12,12,108,56,0]},K:{bytes:[102,108,120,112,120,108,102,0]},L:{bytes:[96,96,96,96,96,96,126,0]},M:{bytes:[99,119,127,107,99,99,99,0]},N:{bytes:[102,118,126,126,110,102,102,0]},O:{bytes:[60,102,102,102,102,102,60,0]},P:{bytes:[124,102,102,124,96,96,96,0]},Q:{bytes:[60,102,102,102,102,60,14,0]},R:{bytes:[124,102,102,124,120,108,102,0]},S:{bytes:[60,102,96,60,6,102,60,0]},T:{bytes:[126,24,24,24,24,24,24,0]},U:{bytes:[102,102,102,102,102,102,60,0]},V:{bytes:[102,102,102,102,102,60,24,0]},W:{bytes:[99,99,99,107,127,119,99,0]},X:{bytes:[102,102,60,24,60,102,102,0]},Y:{bytes:[102,102,102,60,24,24,24,0]},Z:{bytes:[126,6,12,24,48,96,126,0]},"[":{bytes:[60,48,48,48,48,48,60,0]},"\\":{bytes:[0,96,48,24,12,6,3,0]},"]":{bytes:[60,12,12,12,12,12,60,0]},"^":{bytes:[0,24,60,126,24,24,24,24]},_:{bytes:[0,0,0,0,0,0,0,255]},"`":{bytes:[96,48,24,0,0,0,0,0]},a:{bytes:[0,0,60,6,62,102,62,0]},b:{bytes:[0,96,96,124,102,102,124,0]},c:{bytes:[0,0,60,96,96,96,60,0]},d:{bytes:[0,6,6,62,102,102,62,0]},e:{bytes:[0,0,60,102,126,96,60,0]},f:{bytes:[0,14,24,62,24,24,24,0]},g:{bytes:[0,0,62,102,102,62,6,124]},h:{bytes:[0,96,96,124,102,102,102,0]},i:{bytes:[0,24,0,56,24,24,60,0]},j:{bytes:[0,6,0,6,6,6,6,60]},k:{bytes:[0,96,96,108,120,108,102,0]},l:{bytes:[0,56,24,24,24,24,60,0]},m:{bytes:[0,0,102,127,127,107,99,0]},n:{bytes:[0,0,124,102,102,102,102,0]},o:{bytes:[0,0,60,102,102,102,60,0]},p:{bytes:[0,0,124,102,102,124,96,96]},q:{bytes:[0,0,62,102,102,62,6,6]},r:{bytes:[0,0,124,102,96,96,96,0]},s:{bytes:[0,0,62,96,60,6,124,0]},t:{bytes:[0,24,126,24,24,24,14,0]},u:{bytes:[0,0,102,102,102,102,62,0]},v:{bytes:[0,0,102,102,102,60,24,0]},w:{bytes:[0,0,99,107,127,62,54,0]},x:{bytes:[0,0,102,60,24,60,102,0]},y:{bytes:[0,0,102,102,102,62,12,120]},z:{bytes:[0,0,126,12,24,48,126,0]},"{":{bytes:[28,48,48,96,48,48,28,0]},"|":{bytes:[24,24,24,24,24,24,24,24]},"}":{bytes:[56,12,12,6,12,12,56,0]},"~":{bytes:[0,50,76,0,0,0,0,0]}}};e.a=h},function(t,e,i){"use strict";const h={meta:{name:"-Gohu-GohuFont-Medium-R-Normal--11-80-100-100-C-60-ISO8859-1",points:11,properties:{fontAscent:9,fontDescent:2},boundingBox:{width:6,height:11,x:0,y:-2}},glyphs:{0:{bytes:[112,136,152,168,200,136,112],width:5,height:7,y:0},1:{bytes:[32,96,160,32,32,32,32],width:3,height:7,y:0},2:{bytes:[112,136,8,16,32,64,248],width:5,height:7,y:0},3:{bytes:[112,136,8,48,8,136,112],width:5,height:7,y:0},4:{bytes:[16,48,80,144,248,16,16],width:5,height:7,y:0},5:{bytes:[248,128,240,8,8,136,112],width:5,height:7,y:0},6:{bytes:[112,128,240,136,136,136,112],width:5,height:7,y:0},7:{bytes:[248,8,16,16,32,32,32],width:5,height:7,y:0},8:{bytes:[112,136,136,112,136,136,112],width:5,height:7,y:0},9:{bytes:[112,136,136,120,8,8,112],width:5,height:7,y:0}," ":{bytes:[],width:0,height:0,y:0},"!":{bytes:[128,128,128,128,128,128,0,128],width:1,height:8,x:2,y:0},'"':{bytes:[160,160,160],width:3,height:3,x:1,y:5},"#":{bytes:[80,80,248,80,248,80,80],width:5,height:7,y:1},$:{bytes:[32,112,168,160,112,40,168,112,32],width:5,height:9,y:-1},"%":{bytes:[72,168,80,32,80,168,144],width:5,height:7,y:0},"&":{bytes:[96,144,160,64,168,144,104],width:5,height:7,y:0},"'":{bytes:[128,128,128],width:1,height:3,x:2,y:5},"(":{bytes:[32,64,64,128,128,128,64,64,32],width:3,height:9,x:1,y:-1},")":{bytes:[128,64,64,32,32,32,64,64,128],width:3,height:9,x:1,y:-1},"*":{bytes:[32,168,112,168,32],width:5,height:5,y:1},"+":{bytes:[32,32,248,32,32],width:5,height:5,y:1},",":{bytes:[192,192,64,128],width:2,height:4,x:1},"-":{bytes:[248],width:5,height:1,y:3},".":{bytes:[192,192],width:2,height:2,x:1,y:0},"/":{bytes:[8,8,16,16,32,32,64,64,128,128],width:5,height:10},":":{bytes:[192,192,0,192,192],width:2,height:5,x:2,y:0},";":{bytes:[192,192,0,192,192,64,128],width:2,height:7,x:1},"<":{bytes:[16,32,64,128,64,32,16],width:4,height:7,x:1,y:0},"=":{bytes:[248,0,248],width:5,height:3,y:2},">":{bytes:[128,64,32,16,32,64,128],width:4,height:7,x:1,y:0},"?":{bytes:[112,136,8,16,32,0,32],width:5,height:7,y:0},"@":{bytes:[112,136,184,168,184,128,120],width:5,height:7,y:0},A:{bytes:[112,136,136,248,136,136,136,136],width:5,height:8,y:0},B:{bytes:[240,136,136,240,136,136,136,240],width:5,height:8,y:0},C:{bytes:[112,136,128,128,128,128,136,112],width:5,height:8,y:0},D:{bytes:[240,136,136,136,136,136,136,240],width:5,height:8,y:0},E:{bytes:[248,128,128,240,128,128,128,248],width:5,height:8,y:0},F:{bytes:[248,128,128,240,128,128,128,128],width:5,height:8,y:0},G:{bytes:[112,136,128,184,136,136,136,112],width:5,height:8,y:0},H:{bytes:[136,136,136,248,136,136,136,136],width:5,height:8,y:0},I:{bytes:[224,64,64,64,64,64,64,224],width:3,height:8,x:1,y:0},J:{bytes:[8,8,8,8,8,136,136,112],width:5,height:8,y:0},K:{bytes:[136,144,160,192,160,144,136,136],width:5,height:8,y:0},L:{bytes:[128,128,128,128,128,128,128,248],width:5,height:8,y:0},M:{bytes:[136,216,168,168,136,136,136,136],width:5,height:8,y:0},N:{bytes:[136,200,200,168,168,152,152,136],width:5,height:8,y:0},O:{bytes:[112,136,136,136,136,136,136,112],width:5,height:8,y:0},P:{bytes:[240,136,136,240,128,128,128,128],width:5,height:8,y:0},Q:{bytes:[112,136,136,136,136,168,144,104,8],width:5,height:9,y:-1},R:{bytes:[240,136,136,240,144,136,136,136],width:5,height:8,y:0},S:{bytes:[112,136,128,112,8,8,136,112],width:5,height:8,y:0},T:{bytes:[248,32,32,32,32,32,32,32],width:5,height:8,y:0},U:{bytes:[136,136,136,136,136,136,136,112],width:5,height:8,y:0},V:{bytes:[136,136,136,136,80,80,32,32],width:5,height:8,y:0},W:{bytes:[136,136,136,168,168,168,80,80],width:5,height:8,y:0},X:{bytes:[136,136,80,32,80,136,136,136],width:5,height:8,y:0},Y:{bytes:[136,136,80,32,32,32,32,32],width:5,height:8,y:0},Z:{bytes:[248,8,16,32,64,128,128,248],width:5,height:8,y:0},"[":{bytes:[224,128,128,128,128,128,128,128,224],width:3,height:9,x:2,y:-1},"\\":{bytes:[128,128,64,64,32,32,16,16,8,8],width:5,height:10,x:1},"]":{bytes:[224,32,32,32,32,32,32,32,224],width:3,height:9,y:-1},"^":{bytes:[32,80,136],width:5,height:3,y:4},_:{bytes:[252],height:1,y:-1},"`":{bytes:[128,64,32],width:3,height:3,x:1,y:5},a:{bytes:[112,8,120,136,120],width:5,height:5,y:0},b:{bytes:[128,128,128,176,200,136,136,240],width:5,height:8,y:0},c:{bytes:[120,128,128,128,120],width:5,height:5,y:0},d:{bytes:[8,8,8,120,136,136,152,104],width:5,height:8,y:0},e:{bytes:[112,136,248,128,120],width:5,height:5,y:0},f:{bytes:[96,128,128,224,128,128,128,128],width:3,height:8,x:1,y:0},g:{bytes:[120,136,136,152,104,8,112],width:5,height:7},h:{bytes:[128,128,128,176,200,136,136,136],width:5,height:8,y:0},i:{bytes:[64,0,192,64,64,64,96],width:3,height:7,x:1,y:0},j:{bytes:[32,0,96,32,32,32,32,32,192],width:3,height:9},k:{bytes:[128,128,128,144,160,224,144,136],width:5,height:8,y:0},l:{bytes:[192,64,64,64,64,64,64,48],width:4,height:8,x:1,y:0},m:{bytes:[240,168,168,168,168],width:5,height:5,y:0},n:{bytes:[240,136,136,136,136],width:5,height:5,y:0},o:{bytes:[112,136,136,136,112],width:5,height:5,y:0},p:{bytes:[176,200,136,136,240,128,128],width:5,height:7},q:{bytes:[120,136,136,152,104,8,8],width:5,height:7},r:{bytes:[176,200,128,128,128],width:5,height:5,y:0},s:{bytes:[112,128,112,8,240],width:5,height:5,y:0},t:{bytes:[64,64,64,240,64,64,64,48],width:4,height:8,y:0},u:{bytes:[136,136,136,152,104],width:5,height:5,y:0},v:{bytes:[136,136,80,80,32],width:5,height:5,y:0},w:{bytes:[136,168,168,168,80],width:5,height:5,y:0},x:{bytes:[136,80,32,80,136],width:5,height:5,y:0},y:{bytes:[136,136,136,152,104,8,112],width:5,height:7},z:{bytes:[248,16,32,64,248],width:5,height:5,y:0},"{":{bytes:[24,32,32,32,32,192,32,32,32,32,24]},"|":{bytes:[128,128,128,128,128,128,128,128,128],width:1,height:9,x:2,y:-1},"}":{bytes:[192,32,32,32,32,24,32,32,32,32,192]},"~":{bytes:[64,168,16],width:5,height:3,y:2}}};e.a=h},function(t,e,i){"use strict";const h={meta:{name:"Press-Start",points:8,properties:{fontAscent:8,fontDescent:0},boundingBox:{width:8,height:8,x:0,y:0}},glyphs:{0:{bytes:[56,76,198,198,198,100,56],width:7,height:7,y:1},1:{bytes:[48,112,48,48,48,48,252],width:6,height:7,x:1,y:1},2:{bytes:[124,198,14,60,120,224,254],width:7,height:7,y:1},3:{bytes:[126,12,24,60,6,198,124],width:7,height:7,y:1},4:{bytes:[28,60,108,204,254,12,12],width:7,height:7,y:1},5:{bytes:[252,192,252,6,6,198,124],width:7,height:7,y:1},6:{bytes:[60,96,192,252,198,198,124],width:7,height:7,y:1},7:{bytes:[254,198,12,24,48,48,48],width:7,height:7,y:1},8:{bytes:[120,196,228,120,158,134,124],width:7,height:7,y:1},9:{bytes:[124,198,198,126,6,12,120],width:7,height:7,y:1}," ":{bytes:[0],width:1,height:1},"!":{bytes:[224,224,224,192,192,0,192],width:3,height:7,x:2,y:1},'"':{bytes:[216,216,216],width:5,height:3,x:1,y:5},"#":{bytes:[108,254,108,108,108,254,108],width:7,height:7,y:1},$:{bytes:[16,124,208,124,22,252,16],width:7,height:7,y:1},"%":{bytes:[98,164,200,16,38,74,140],width:7,height:7,y:1},"&":{bytes:[112,216,216,112,218,204,126],width:7,height:7,y:1},"'":{bytes:[192,192,192],width:2,height:3,x:2,y:5},"(":{bytes:[48,96,192,192,192,96,48],width:4,height:7,x:2,y:1},")":{bytes:[192,96,48,48,48,96,192],width:4,height:7,x:1,y:1},"*":{bytes:[108,56,254,56,108],width:7,height:5,y:2},"+":{bytes:[48,48,252,48,48],width:6,height:5,x:1,y:2},",":{bytes:[96,96,192],width:3,height:3,x:1},"-":{bytes:[252],width:6,height:1,x:1,y:4},".":{bytes:[192,192],width:2,height:2,x:2,y:1},"/":{bytes:[2,4,8,16,32,64,128],width:7,height:7,y:1},":":{bytes:[192,192,0,192,192],width:2,height:5,x:2,y:2},";":{bytes:[96,96,0,96,96,192],width:3,height:6,x:1,y:1},"<":{bytes:[24,48,96,192,96,48,24],width:5,height:7,x:1,y:1},"=":{bytes:[254,0,254],width:7,height:3,y:3},">":{bytes:[192,96,48,24,48,96,192],width:5,height:7,x:1,y:1},"?":{bytes:[124,254,198,12,56,0,56],width:7,height:7,y:1},"@":{bytes:[124,130,186,170,190,128,124],width:7,height:7,y:1},A:{bytes:[56,108,198,198,254,198,198],width:7,height:7,y:1},B:{bytes:[252,198,198,252,198,198,252],width:7,height:7,y:1},C:{bytes:[60,102,192,192,192,102,60],width:7,height:7,y:1},D:{bytes:[248,204,198,198,198,204,248],width:7,height:7,y:1},E:{bytes:[254,192,192,252,192,192,254],width:7,height:7,y:1},F:{bytes:[254,192,192,252,192,192,192],width:7,height:7,y:1},G:{bytes:[62,96,192,206,198,102,62],width:7,height:7,y:1},H:{bytes:[198,198,198,254,198,198,198],width:7,height:7,y:1},I:{bytes:[252,48,48,48,48,48,252],width:6,height:7,x:1,y:1},J:{bytes:[6,6,6,6,6,198,124],width:7,height:7,y:1},K:{bytes:[198,204,216,240,248,220,206],width:7,height:7,y:1},L:{bytes:[192,192,192,192,192,192,252],width:6,height:7,x:1,y:1},M:{bytes:[198,238,254,254,214,198,198],width:7,height:7,y:1},N:{bytes:[198,230,246,254,222,206,198],width:7,height:7,y:1},O:{bytes:[124,198,198,198,198,198,124],width:7,height:7,y:1},P:{bytes:[252,198,198,198,252,192,192],width:7,height:7,y:1},Q:{bytes:[124,198,198,198,222,204,122],width:7,height:7,y:1},R:{bytes:[252,198,198,206,248,220,206],width:7,height:7,y:1},S:{bytes:[120,204,192,124,6,198,124],width:7,height:7,y:1},T:{bytes:[252,48,48,48,48,48,48],width:6,height:7,x:1,y:1},U:{bytes:[198,198,198,198,198,198,124],width:7,height:7,y:1},V:{bytes:[198,198,198,238,124,56,16],width:7,height:7,y:1},W:{bytes:[198,198,214,254,254,238,198],width:7,height:7,y:1},X:{bytes:[198,238,124,56,124,238,198],width:7,height:7,y:1},Y:{bytes:[204,204,204,120,48,48,48],width:6,height:7,x:1,y:1},Z:{bytes:[254,14,28,56,112,224,254],width:7,height:7,y:1},"[":{bytes:[240,192,192,192,192,192,240],width:4,height:7,x:2,y:1},"\\":{bytes:[128,64,32,16,8,4,2],width:7,height:7,y:1},"]":{bytes:[240,48,48,48,48,48,240],width:4,height:7,x:1,y:1},"^":{bytes:[112,216],width:5,height:2,x:1,y:6},_:{bytes:[254],width:7,height:1},"`":{bytes:[128,64],width:2,height:2,x:3,y:6},a:{bytes:[124,6,126,198,126],width:7,height:5,y:1},b:{bytes:[192,192,252,198,198,198,124],width:7,height:7,y:1},c:{bytes:[126,192,192,192,126],width:7,height:5,y:1},d:{bytes:[6,6,126,198,198,198,126],width:7,height:7,y:1},e:{bytes:[124,198,254,192,124],width:7,height:5,y:1},f:{bytes:[28,48,252,48,48,48,48],width:6,height:7,x:1,y:1},g:{bytes:[126,198,198,126,6,124],width:7,height:6},h:{bytes:[192,192,252,198,198,198,198],width:7,height:7,y:1},i:{bytes:[48,0,112,48,48,48,252],width:6,height:7,x:1,y:1},j:{bytes:[24,0,56,24,24,24,24,240],width:5,x:1},k:{bytes:[192,192,206,252,248,220,206],width:7,height:7,y:1},l:{bytes:[112,48,48,48,48,48,252],width:6,height:7,x:1,y:1},m:{bytes:[252,182,182,182,182],width:7,height:5,y:1},n:{bytes:[252,198,198,198,198],width:7,height:5,y:1},o:{bytes:[124,198,198,198,124],width:7,height:5,y:1},p:{bytes:[252,198,198,252,192,192],width:7,height:6},q:{bytes:[126,198,198,126,6,6],width:7,height:6},r:{bytes:[220,224,192,192,192],width:6,height:5,x:1,y:1},s:{bytes:[124,192,124,6,252],width:7,height:5,y:1},t:{bytes:[48,48,252,48,48,48,48],width:6,height:7,x:1,y:1},u:{bytes:[198,198,198,198,126],width:7,height:5,y:1},v:{bytes:[204,204,204,120,48],width:6,height:5,x:1,y:1},w:{bytes:[182,182,182,182,126],width:7,height:5,y:1},x:{bytes:[198,254,56,254,198],width:7,height:5,y:1},y:{bytes:[198,198,198,126,6,124],width:7,height:6},z:{bytes:[254,28,56,112,254],width:7,height:5,y:1},"{":{bytes:[48,96,96,192,96,96,48],width:4,height:7,x:2,y:1},"|":{bytes:[192,192,192,192,192,192,192],width:2,height:7,x:3,y:1},"}":{bytes:[192,96,96,48,96,96,192],width:4,height:7,x:1,y:1},"~":{bytes:[112,186,28],width:7,height:3,y:3}}};e.a=h},function(t,e,i){"use strict";const h={meta:{name:"-xos4-TerminessPowerline-Bold-R-Normal--12-120-72-72-C-60-ISO10646-1",points:12,properties:{defaultChar:-3,fontDescent:2,fontAscent:10},boundingBox:{width:6,height:12,x:0,y:-2}},glyphs:{0:{bytes:[0,0,112,136,152,168,200,136,136,112,0,0]},1:{bytes:[0,0,32,96,32,32,32,32,32,112,0,0]},2:{bytes:[0,0,112,136,136,16,32,64,128,248,0,0]},3:{bytes:[0,0,112,136,8,48,8,8,136,112,0,0]},4:{bytes:[0,0,8,24,40,72,136,248,8,8,0,0]},5:{bytes:[0,0,248,128,128,240,8,8,136,112,0,0]},6:{bytes:[0,0,112,128,128,240,136,136,136,112,0,0]},7:{bytes:[0,0,248,8,8,16,16,32,32,32,0,0]},8:{bytes:[0,0,112,136,136,112,136,136,136,112,0,0]},9:{bytes:[0,0,112,136,136,136,120,8,8,112,0,0]}," ":{bytes:[0,0,0,0,0,0,0,0,0,0,0,0]},"!":{bytes:[0,0,32,32,32,32,32,0,32,32,0,0]},'"':{bytes:[0,80,80,80,0,0,0,0,0,0,0,0]},"#":{bytes:[0,0,80,80,248,80,80,248,80,80,0,0]},$:{bytes:[0,0,32,112,168,160,112,40,168,112,32,0]},"%":{bytes:[0,0,72,168,80,16,32,40,84,72,0,0]},"&":{bytes:[0,0,32,80,80,32,104,144,144,104,0,0]},"'":{bytes:[0,32,32,32,0,0,0,0,0,0,0,0]},"(":{bytes:[0,0,16,32,64,64,64,64,32,16,0,0]},")":{bytes:[0,0,64,32,16,16,16,16,32,64,0,0]},"*":{bytes:[0,0,0,0,80,32,248,32,80,0,0,0]},"+":{bytes:[0,0,0,0,32,32,248,32,32,0,0,0]},",":{bytes:[0,0,0,0,0,0,0,0,32,32,64,0]},"-":{bytes:[0,0,0,0,0,0,248,0,0,0,0,0]},".":{bytes:[0,0,0,0,0,0,0,0,32,32,0,0]},"/":{bytes:[0,0,8,8,16,16,32,32,64,64,0,0]},":":{bytes:[0,0,0,0,32,32,0,0,32,32,0,0]},";":{bytes:[0,0,0,0,32,32,0,0,32,32,64,0]},"<":{bytes:[0,0,0,8,16,32,64,32,16,8,0,0]},"=":{bytes:[0,0,0,0,248,0,0,248,0,0,0,0]},">":{bytes:[0,0,0,64,32,16,8,16,32,64,0,0]},"?":{bytes:[0,0,112,136,136,16,32,0,32,32,0,0]},"@":{bytes:[0,0,112,136,152,168,168,152,128,120,0,0]},A:{bytes:[0,0,112,136,136,136,248,136,136,136,0,0]},B:{bytes:[0,0,240,136,136,240,136,136,136,240,0,0]},C:{bytes:[0,0,112,136,128,128,128,128,136,112,0,0]},D:{bytes:[0,0,224,144,136,136,136,136,144,224,0,0]},E:{bytes:[0,0,248,128,128,240,128,128,128,248,0,0]},F:{bytes:[0,0,248,128,128,240,128,128,128,128,0,0]},G:{bytes:[0,0,112,136,128,128,184,136,136,112,0,0]},H:{bytes:[0,0,136,136,136,248,136,136,136,136,0,0]},I:{bytes:[0,0,112,32,32,32,32,32,32,112,0,0]},J:{bytes:[0,0,56,16,16,16,16,144,144,96,0,0]},K:{bytes:[0,0,136,144,160,192,192,160,144,136,0,0]},L:{bytes:[0,0,128,128,128,128,128,128,128,248,0,0]},M:{bytes:[0,0,136,216,168,168,136,136,136,136,0,0]},N:{bytes:[0,0,136,136,200,168,152,136,136,136,0,0]},O:{bytes:[0,0,112,136,136,136,136,136,136,112,0,0]},P:{bytes:[0,0,240,136,136,136,240,128,128,128,0,0]},Q:{bytes:[0,0,112,136,136,136,136,136,168,112,8,0]},R:{bytes:[0,0,240,136,136,136,240,160,144,136,0,0]},S:{bytes:[0,0,112,136,128,112,8,8,136,112,0,0]},T:{bytes:[0,0,248,32,32,32,32,32,32,32,0,0]},U:{bytes:[0,0,136,136,136,136,136,136,136,112,0,0]},V:{bytes:[0,0,136,136,136,80,80,80,32,32,0,0]},W:{bytes:[0,0,136,136,136,136,168,168,216,136,0,0]},X:{bytes:[0,0,136,136,80,32,32,80,136,136,0,0]},Y:{bytes:[0,0,136,136,80,80,32,32,32,32,0,0]},Z:{bytes:[0,0,248,8,16,32,64,128,128,248,0,0]},"[":{bytes:[0,0,112,64,64,64,64,64,64,112,0,0]},"\\":{bytes:[0,0,64,64,32,32,16,16,8,8,0,0]},"]":{bytes:[0,0,112,16,16,16,16,16,16,112,0,0]},"^":{bytes:[0,32,80,136,0,0,0,0,0,0,0,0]},_:{bytes:[0,0,0,0,0,0,0,0,0,0,248,0]},"`":{bytes:[64,32,0,0,0,0,0,0,0,0,0,0]},a:{bytes:[0,0,0,0,112,8,120,136,136,120,0,0]},b:{bytes:[0,0,128,128,240,136,136,136,136,240,0,0]},c:{bytes:[0,0,0,0,112,136,128,128,136,112,0,0]},d:{bytes:[0,0,8,8,120,136,136,136,136,120,0,0]},e:{bytes:[0,0,0,0,112,136,248,128,136,112,0,0]},f:{bytes:[0,0,24,32,112,32,32,32,32,32,0,0]},g:{bytes:[0,0,0,0,120,136,136,136,136,120,8,112]},h:{bytes:[0,0,128,128,240,136,136,136,136,136,0,0]},i:{bytes:[0,32,32,0,96,32,32,32,32,112,0,0]},j:{bytes:[0,8,8,0,24,8,8,8,8,8,72,48]},k:{bytes:[0,0,64,64,72,80,96,96,80,72,0,0]},l:{bytes:[0,0,96,32,32,32,32,32,32,112,0,0]},m:{bytes:[0,0,0,0,240,168,168,168,168,168,0,0]},n:{bytes:[0,0,0,0,240,136,136,136,136,136,0,0]},o:{bytes:[0,0,0,0,112,136,136,136,136,112,0,0]},p:{bytes:[0,0,0,0,240,136,136,136,136,240,128,128]},q:{bytes:[0,0,0,0,120,136,136,136,136,120,8,8]},r:{bytes:[0,0,0,0,184,192,128,128,128,128,0,0]},s:{bytes:[0,0,0,0,120,128,112,8,8,240,0,0]},t:{bytes:[0,0,32,32,112,32,32,32,32,24,0,0]},u:{bytes:[0,0,0,0,136,136,136,136,136,120,0,0]},v:{bytes:[0,0,0,0,136,136,80,80,32,32,0,0]},w:{bytes:[0,0,0,0,136,136,168,168,168,112,0,0]},x:{bytes:[0,0,0,0,136,80,32,32,80,136,0,0]},y:{bytes:[0,0,0,0,136,136,136,136,136,120,8,112]},z:{bytes:[0,0,0,0,248,16,32,64,128,248,0,0]},"{":{bytes:[0,0,24,32,32,64,32,32,32,24,0,0]},"|":{bytes:[0,0,32,32,32,32,32,32,32,32,0,0]},"}":{bytes:[0,0,96,16,16,8,16,16,16,96,0,0]},"~":{bytes:[0,72,168,144,0,0,0,0,0,0,0,0]}}};e.a=h},function(t,e,i){"use strict";function h(t){const e=Object.create(b);e.width=(a.e.widthPx+a.k.shipPaddingPx)*t.width,e.height=(a.e.heightPx+a.k.linePaddingPx)*t.height,e.ctx=i.i(o.c)(e.width,e.height),e.x=(a.b.screenWidth-e.width)/2,e.y=.1*a.b.screenHeight*t.levelNumber,e.direction=i.i(o.h)(0,1)?y.c.left:y.c.right,e.ships=[];const h=[];for(let r=0;r<t.shipTypes;r+=1){const t=s.a();t.missileType=n.a(),h.push(t)}switch(t.shipArrangement){case y.h.oneTypePerLine:for(let i=0;i<t.height;i++)for(let s=0;s<t.width;s++){const t=Object.create(h[i]);t.formation=e,t.x=Math.floor(a.k.shipPaddingPx/2)+(a.e.widthPx+a.k.shipPaddingPx)*s,t.y=Math.floor(a.k.linePaddingPx/2)+(a.e.heightPx+a.k.linePaddingPx)*i,e.ships.push(t)}}return e.ships.forEach(t=>t.show(e.ctx)),e}var s=i(3),n=i(7),r=i(6),o=i(2),a=i(0),y=i(1);e.a=h;let c,d,l;const b={advanceSpeed:.05,evadeSpeed:.07,advanceAmount:.05,advanceStart:null,direction:null,x:null,y:null,ctx:null,ships:null,width:null,height:null,show:function(t){i.i(o.d)(t,this.ctx,[this.x,this.y])},behavior:function(){if(this.y+this.ships[this.ships.length-1].y+a.e.heightPx>=a.b.screenHeight&&o.a.pub(y.a.gameOver),this.direction===y.c.down?this.y-this.advanceStart>=this.advanceAmount*a.b.screenHeight&&(this.direction=0===this.x?y.c.right:y.c.left):(this.x<=0||this.x+this.ctx.canvas.width>=a.b.screenWidth)&&(this.advanceStart=this.y,this.direction=y.c.down,this.x=this.x<=0?0:a.b.screenWidth-this.ctx.canvas.width),1===i.i(o.h)(this.ships.length)&&this.ships[i.i(o.h)(0,this.ships.length-1)].armMissile(),1===i.i(o.h)(3*this.ships.length)){let t=this.ships.filter(t=>t.missile);t.length&&t[i.i(o.h)(0,t.length-1)].fire()}},move:function(t){switch(this.direction){case y.c.left:this.x-=this.evadeSpeed*a.b.screenWidth*t/1e3;break;case y.c.right:this.x+=this.evadeSpeed*a.b.screenWidth*t/1e3;break;case y.c.up:this.y-=this.advanceSpeed*a.b.screenHeight*t/1e3;break;case y.c.down:this.y+=this.advanceSpeed*a.b.screenHeight*t/1e3}},checkCollisions:function(t){if(c=t.x-this.x,d=t.y-this.y,!(c<0||d<0||c>this.width||d>this.height))for(l=this.ships.length-1;l>=0;l-=1)if(i.i(o.i)(c,d,this.ships[l].x,this.ships[l].y)){this.ships[l].missile&&this.ships[l].missile.status!==y.d.launched?(o.a.pub(y.a.levelEntityCreated,y.a.effect,r.a(this.ships[l])),o.a.pub(y.a.levelEntityCreated,y.a.effect,r.a(this.ships[l].missile))):o.a.pub(y.a.levelEntityCreated,y.a.effect,r.a(this.ships[l],t)),this.destroyShip(l),t.destroy();break}},destroyShip:function(t){o.a.pub(y.a.enemyDestroyed,this.ships[l]),this.ships[l].missile&&this.ships[l].missile.status!==y.d.launched&&(o.a.pub(y.a.enemyDestroyed,this.ships[l].missile),this.ships[l].missile.destroy()),this.ctx.clearRect(this.ships[t].x,this.ships[t].y,a.e.widthPx,a.e.heightPx),this.ships.splice(t,1),this.ships.length||o.a.pub(y.a.levelEntityDestroyed,y.a.formation,this)}}},function(t,e,i){"use strict";function h(t){t=t.toString(),t="0".repeat(Math.max(o.d.scoreDigits-t.length,0))+t,f.clearRect(b,o.d.paddingY,t.length*l.meta.boundingBox.width*o.d.fontSize,(l.meta.boundingBox.height+Math.abs(l.meta.boundingBox.y))*o.d.fontSize),l.write(f,[b,u],t,{size:o.d.fontSize})}function s(t){f.clearRect(g,u-o.e.heightPx,o.c.maxLives*(o.e.width+1)*o.b.pixelSize,o.e.heightPx);for(let e=0;e<t.length;e+=1)t[e].show(f,g+e*(o.e.width+1)*o.b.pixelSize,u-o.e.heightPx)}function n(t){l=c.a(o.d.font),u=o.d.paddingY+(l.meta.boundingBox.height+l.meta.boundingBox.y)*o.d.fontSize,b=l.write(f,[o.d.paddingX,u],d.a.score,{size:o.d.fontSize}).lineEnd,h(t.score),g=o.b.screenWidth-o.d.paddingX-o.c.maxLives*(o.e.width+1)*o.b.pixelSize,l.write(f,[g,u],d.a.ships,{size:o.d.fontSize,alignment:a.e.right}),s(t.extraShips),y.a.on(a.a.scoreUpdate,h),y.a.on(a.a.shipListUpdate,s)}function r(){y.a.off(h),y.a.off(s)}var o=i(0),a=i(1),y=i(2),c=i(4),d=i(8);e.a=n,e.b=r;let l,b,u,g;const f=interfaceScreen.getContext("2d")},function(t,e,i){"use strict";function h(t){d=a.a(o.j.font),l=t,c.a.on(y.a.animationFrame,n),u=o.j.opacity.slice(),g=o.j.duration/o.j.opacity.length,b=i.i(c.g)(o.j.color,u.shift()),n(0)}function s(){c.a.off(n),r()}function n(t){g-=t,g<=0&&(u.length?(g+=o.j.duration/o.j.opacity.length,b=i.i(c.g)(o.j.color,u.shift()),r(),d.write(f,[o.b.screenWidth/2,(o.b.screenHeight+d.meta.points*o.j.size)/2],`${l}`,{alignment:y.e.center,size:o.j.size,color:b})):c.a.pub(y.a.introOver))}function r(){f.clearRect(0,(o.b.screenHeight-d.meta.points*o.j.size)/2,o.b.screenWidth,d.meta.points*o.j.size)}var o=i(0),a=i(4),y=i(1),c=i(2);e.b=h,e.a=s;let d,l,b,u,g;const f=interfaceScreen.getContext("2d")},function(t,e,i){"use strict";function h(t){switch(t){case d.b.arrowUp:x=x-1>=0?x-1:w.length-1,a.a.pub(d.a.cursorRepositioned,w[x].y);break;case d.b.arrowDown:x=x+1<=w.length-1?x+1:0,a.a.pub(d.a.cursorRepositioned,w[x].y);break;case d.b.enter:case d.b.space:w[x].action(),r()}}function s(t){g=y.a(b.n.font),f=i.i(a.g)(b.n.color,100),a.a.on(d.a.keyDown,h),a.a.on(d.a.animationFrame,o),v.y=Math.round((b.b.screenHeight-g.meta.boundingBox.height*(b.n.titleSize+3*b.n.menuItemSize)*b.n.lineHeight)/2),[B,D,E].forEach(t=>{t[0].y=v.y+g.meta.boundingBox.height*b.n.titleSize*b.n.lineHeight;for(let e=1;e<t.length;e+=1)t[e].y=t[e-1].y+g.meta.boundingBox.height*b.n.menuItemSize*b.n.lineHeight}),S=u.c(),t.oldPlayer?(w=E,P={position:t.position,missile:Object.create(t.oldPlayer.lastShip.missileType)},P.missile.armProgress=b.i.armSteps-1,t.position===-1&&(S.push(t.record),P.position=S.length-1)):(w=B,P=null);for(let e=0;e<S.length;e+=1)S[e].label="0".repeat(Math.max(b.n.scoreDigits-S[e].score.toString(10).length,0))+S[e].score,S[e].y=v.y+g.meta.boundingBox.height*b.n.titleSize*b.n.lineHeight+g.meta.boundingBox.height*b.n.menuItemSize*b.n.lineHeight*e;return m=0,x=0,{x:r(),y:w[x].y}}function n(){a.a.off(h),a.a.off(o),k.clearRect(0,0,b.b.screenWidth,b.b.screenHeight)}function r(){k.clearRect(0,0,b.b.screenWidth,b.b.screenHeight),v.x=g.write(k,[b.b.screenWidth/2,v.y],l.a.title,{alignment:d.e.center,size:b.n.titleSize,color:f}).lineStart,z.x=v.x+b.e.widthPx+b.n.cursorPadding;for(let t=0;t<w.length;t+=1)g.write(k,[z.x,w[t].y],w[t].label,{size:b.n.menuItemSize,color:f});if(w===E)for(let t=0;t<S.length;t+=1)P&&P.position===t&&P.missile.show(k,z.x+(b.e.widthPx-b.i.widthPx)/2,S[t].y-b.e.heightPx+(b.e.heightPx-b.i.heightPx)/2),c.c(k,z.x,S[t].y-b.e.heightPx,S[t].blueprint,S[t].color),g.write(k,[z.x+2*b.e.widthPx,S[t].y],S[t].label,{size:b.n.menuItemSize,color:f});return v.x}function o(t){m+=t,p=i.i(a.g)(b.n.color,100/b.n.fadeSteps*(b.n.fadeSteps-Math.floor(m/(b.n.transitionDuration/b.n.fadeSteps)))),p!==f&&(f=p,r())}var a=i(2),y=i(4),c=i(3),d=i(1),l=i(8),b=i(0),u=i(5);e.a=s,e.b=n;let g,f,p,w,x,m,S,P,v={},z={};const k=interfaceScreen.getContext("2d"),B=[{label:l.a.play,action:function(){a.a.off(h),a.a.pub(d.a.menuToGameTransition)}},{label:l.a.highScores,action:function(){w=E,x=0,a.a.pub(d.a.cursorRepositioned,w[x].y)}},{label:l.a.options,action:function(){w=D,x=0,a.a.pub(d.a.cursorRepositioned,w[x].y)}}],D=[{get label(){return l.a.sound+(b.o.on?l.a.on:l.a.off)},action:function(){i.i(b.a)(d.g.sound,!b.o.on)}},{get label(){return l.a.showFPS+(b.h.showFPS?l.a.on:l.a.off)},action:function(){i.i(b.a)(d.g.fps,!b.h.showFPS)}},{label:l.a.back,get y(){return this._y+g.meta.boundingBox.height*b.n.menuItemSize*b.n.lineHeight},set y(t){this._y=t},action:function(){w=B,x=2,a.a.pub(d.a.cursorRepositioned,w[x].y)}}],E=[{label:l.a.back,get y(){return this._y+g.meta.boundingBox.height*b.n.menuItemSize*b.n.lineHeight*(S.length+1)},set y(t){this._y=t},action:function(){w=B,x=1,a.a.pub(d.a.cursorRepositioned,w[x].y)}}]},function(t,e,i){"use strict";function h(t){x||(a(h),f=f||t,p=t-f,p<1e3/r.h.maxFPS||(f=t,l.clearRect(0,0,r.b.screenWidth,r.b.screenHeight),g=b.drawFrame(p),c.clearRect(0,0,r.b.screenWidth,r.b.screenHeight),i.i(o.b)(c,l,[0,0]),r.h.showFPS&&(Date.now()-w>=1e3?(w+=1e3,d.clearRect(0,0,20,12),d.fillStyle=r.h.systemInfoColor,d.font=r.h.systemInfoText,d.fillText(m,0,10),m=1):m+=1),g&&(n(),b.end(),u(g))))}function s(t){return b=t.animation,b.init(t.data,l),w=Date.now(),a(h),new Promise(t=>{u=(e=>t(e))})}function n(){y(h),f=null,b.end(),u(g)}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(10);e.start=s,e.stop=n;const a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,c=gameScreen.getContext("2d"),d=interfaceScreen.getContext("2d"),l=i.i(o.a)();let b,u,g,f,p,w,x=!1,m=0},function(t,e,i){"use strict";function h(t,e,i,h){return!(t>i+s.e.widthPx||e>h+s.e.heightPx||t<i-s.i.widthPx||e<h-s.i.heightPx)}var s=i(0);e.a=h},function(t,e,i){"use strict";function h(t,...e){r[t]&&r[t].forEach(t=>t(...e))}function s(t,e){r[t]=r[t]||[],r[t].push(e)}function n(t){let e;for(let i in r)e=r[i].indexOf(t),e>=0&&(r[i].splice(e,1),r[i].length||delete r[i])}Object.defineProperty(e,"__esModule",{value:!0}),e.pub=h,e.on=s,e.off=n;const r={}},function(t,e,i){"use strict";function h(t){const e=t.canvas.width,h=t.canvas.height,a=`${e}x${h}`;return r[a]&&o[a]!==s.g.itemsPerCanvas||(r[a]=r[a]||[],r[a].push(i.i(n.c)(e*s.g.itemsPerCanvas,h)),o[a]=0),i.i(n.d)(r[a][r[a].length-1],t,[o[a]*e,0],[0,0],[e,h]),o[a]+=1,{ctx:r[a][r[a].length-1],coords:[(o[a]-1)*e,0]}}var s=i(0),n=i(2);e.a=h;const r={},o={}},function(t,e,i){"use strict";function h(t){if(t.gameOver){const e={score:t.player.score,blueprint:(t.player.currentShip||t.player.lastShip).blueprint,color:(t.player.currentShip||t.player.lastShip).color},i=r.b(e);l.b.start({animation:d,data:{player:a.a(),oldPlayer:t.player,position:i,record:e}}).then(t=>h(t))}else t.level=y.a(t.level?t.level.number+1:1),l.b.start({animation:c,data:t}).then(t=>h(t))}Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),n=i(1),r=i(5),o=i(15),a=i(14),y=i(13),c=i(11),d=i(12),l=i(2);window.location.search.substr(1).split(/[,;&]/).forEach(t=>i.i(s.a)(...t.split("="))),[gameScreen,interfaceScreen,backgroundScreen].forEach(t=>{t.width=s.b.screenWidth,t.height=s.b.screenHeight}),main.style.width=s.b.screenWidth+"px",main.style.height=s.b.screenHeight+"px",document.addEventListener(n.a.keyDown,t=>{l.a.pub(n.a.keyDown,t.key,t)}),document.addEventListener(n.a.keyUp,t=>{l.a.pub(n.a.keyUp,t.key,t)}),r.a(),o.a().show(backgroundScreen.getContext("2d")),l.b.start({animation:d,data:{player:a.a()}}).then(t=>h(t))}]);
//# sourceMappingURL=main.js.map